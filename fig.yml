---

nginx:
  image: lucasgmartins/nginx
  ports:
    - "80:80"

mysql:
  image: lucasgmartins/mysql
  ports:
    - "3307:3306"
  environment:
    MYSQL_ROOT_PASSWORD     : ZmxpY2UNCg==
    MYSQL_CORE_DATABASE     : flice-core
    MYSQL_SECURITY_DATABASE : flice-security

rabbitmq:
  image: rabbitmq:3.4.4-management
  ports: 
    - "15672:15672"

core:
  image: lucasgmartins/java8
  volumes:
    - flice-projects/flice-core/target/flice-core.jar:/app/flice-core.jar
    - flice-projects/flice-core/src/main/resources/docker.yml:/app/docker.yml
  ports: 
    - "8080:8080"
    - "9090:9090"
  links:
    - mysql
  command: java -jar /app/flice-core.jar server /app/docker.yml

security:
  image: lucasgmartins/java8
  volumes:
    - flice-projects/flice-security/target/flice-security.jar:/app/flice-security.jar
    - flice-projects/flice-security/src/main/resources/docker.yml:/app/docker.yml
  ports: 
    - "8081:8081"
    - "9091:9091"
  links:
    - mysql
  command: java -jar /app/flice-security.jar server /app/docker.yml

